<script>
function shuffleSidebarImages(sidebarClass) {
  const sidebars = document.getElementsByClassName(sidebarClass);
  Array.from(sidebars).forEach(sidebar => {
    const imgs = Array.from(sidebar.querySelectorAll('img'));
    // ëœë¤ ìˆœì„œ ì„ê¸° (Fisher-Yates)
    for (let i = imgs.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [imgs[i], imgs[j]] = [imgs[j], imgs[i]];
    }
    // ê¸°ì¡´ ì´ë¯¸ì§€ ì œê±° í›„ ìƒˆ ìˆœì„œëŒ€ë¡œ ì¶”ê°€
    sidebar.innerHTML = '';
    imgs.forEach(img => sidebar.appendChild(img));
  });
}

document.addEventListener('DOMContentLoaded', function () {
  // ìµœì´ˆ ì‹¤í–‰
  shuffleSidebarImages('sidebar');
  setInterval(function () {
    shuffleSidebarImages('sidebar');
  }, 1500);
});

let currentProduct = "";

function openPurchase(name) {
  currentProduct = name;
  document.getElementById("product-name").textContent = name;
  document.getElementById("purchase-email").value = "";
  document.getElementById("purchase-modal").style.display = "flex";
}

function closePurchase() {
  document.getElementById("purchase-modal").style.display = "none";
}

// ğŸ”¥ ì—¬ê¸°ë¶€í„° ìˆ˜ì •ëœ ë¶€ë¶„
function confirmPurchase() {
  const email = document.getElementById("purchase-email").value.trim();
  if (!email) {
    alert("Please enter your email to continue.");
    return;
  }

  // ë„¤ê°€ ì“°ëŠ” êµ¬ê¸€ í¼ ì‘ë‹µ URL
  const formURL =
    "https://docs.google.com/forms/d/1D5BV44ocn7nVOxrMXBOEOAELT8s2BcGoi6K3LqjGRb0/formResponse";

  // ì´ë©”ì¼ì´ ì—°ê²°ëœ entry ID (ì•ì—ì„œ ì°¾ì•˜ë˜ ê°’)
  const entryID = "entry.70548093";

  const data = new FormData();
  data.append(entryID, email);

  // í¼ìœ¼ë¡œ ì „ì†¡ (ì‹œíŠ¸/Apps Script íŠ¸ë¦¬ê±° ì‹¤í–‰ìš©)
  fetch(formURL, {
    method: "POST",
    body: data,
    mode: "no-cors"
  });

  alert("Check your inbox. Yuri just slid into your mail.");
  closePurchase();
}
</script>
