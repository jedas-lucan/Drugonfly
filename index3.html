<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sale</title>

    <!-- fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Explora&family=Irish+Grover&family=Inria+Serif:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style3.css">
</head>

<body style="background-image: url('https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExcmFqenlvdGUxZDVodTJnNncxaGxweTF2MXkxMHhhZjJhbGswNXlseiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/l2QEacj2yBTxRlWq4/giphy.gif');">

<header class="main-header">
    <img src="drugonflygraph.png" class="logo">
    <h2 class="header-title glitch" data-text="Brain popping pleasure!">
        Brain popping pleasure!
    </h2>
    <img src="drugonflygraph.png" class="logo">
</header>

<div class="layout">

  <!-- LEFT SIDEBAR -->
  <aside class="sidebar left">
    <img src="bettle1.jpg">
    <img src="poster4.jpg">
    <img src="pinkmantis1.jpg">
    <img src="Spider1.jpg">
  </aside>

  <!-- FLOATING BANNER -->
  <div class="floating-banner">
    <span class="floating-text">Find your perfect hit</span>
  </div>

  <!-- MAIN CONTENT (RESPONSIVE) -->
  <main class="main-middle">
      <div class="main-content">

        <!-- ITEM 1 -->
        <div class="item-card sold">
          <div class="item-img">
            <img src="drink 2.png">
          </div>
          <div class="item-desc">
            <h3 class="item-title">
              Velvet Coil Reserve <span class="item-price">– 95 credits</span>
            </h3>
            <p class="item-effect">Effect: Brief time-split vision</p>
            <p class="item-text">A rolled cocktail that delays your senses by half a second.</p>
            <span class="tag-ribbon">SOLD OUT</span>
          </div>
        </div>

        <!-- ITEM 2 -->
        <div class="item-card sold">
          <div class="item-img">
            <img src="powder 3.png">
          </div>
          <div class="item-desc">
            <h3 class="item-title">
              Blush Drift <span class="item-price">– 180 credits</span>
            </h3>
            <p class="item-effect">Effect: Quick euphoria, soft visuals.</p>
            <p class="item-text">Pink powder you inhale; gives a light floating feeling.</p>
            <span class="tag-ribbon">SOLD OUT</span>
          </div>
        </div>

        <!-- ITEM 3 -->
        <div class="item-card">
          <div class="item-img">
            <img src="candy 2.png">
          </div>
          <div class="item-desc mint">
            <h3 class="item-title">
              Loverbite Crystal <span class="item-price">– 270 credits</span>
            </h3>
            <p class="item-effect">Effect: Shared desire between two users.</p>
            <p class="item-text">Heart candy eaten often while kissing.</p>

            <button class="buy-btn" onclick="openPurchase('Loverbite Crystal')">
              Buy
            </button>
          </div>
        </div>

      </div>
  </main>

  <!-- RIGHT SIDEBAR -->
  <aside class="sidebar right">
    <img src="pinkmantis1.jpg">
    <img src="Spider1.jpg">
    <img src="bettle1.jpg">
    <img src="poster4.jpg">
  </aside>
</div>


<!-- PURCHASE MODAL -->
<div id="purchase-modal" class="purchase-modal">
  <div class="purchase-box">
    <p class="purchase-title">Confirm purchase</p>
    <p class="purchase-text">
      Do you really want to buy <span id="product-name"></span>?<br>
      <span>We are not responsible for any issues<br>that occur during use.</span>
    </p>

    <input type="email" id="purchase-email" class="purchase-input" placeholder="Enter your email">

    <div class="purchase-actions">
      <button onclick="confirmPurchase()">Confirm</button>
      <button onclick="closePurchase()">Cancel</button>
    </div>
  </div>
</div>

<button id="to-top-btn" onclick='window.location.href="index.html";'>
  Back to main
</button>


<!-- JAVASCRIPT -->
<script>
function shuffleSidebarImages(className) {
  const bars = document.getElementsByClassName(className);
  Array.from(bars).forEach(bar => {
    const imgs = Array.from(bar.querySelectorAll('img'));
    for (let i = imgs.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [imgs[i], imgs[j]] = [imgs[j], imgs[i]];
    }
    bar.innerHTML = '';
    imgs.forEach(img => bar.appendChild(img));
  });
}

document.addEventListener('DOMContentLoaded', () => {
  shuffleSidebarImages('sidebar');
  setInterval(() => shuffleSidebarImages('sidebar'), 1500);
});

let currentProduct = "";

function openPurchase(name) {
  currentProduct = name;
  document.getElementById("product-name").textContent = name;
  document.getElementById("purchase-modal").style.display = "flex";
}

function closePurchase() {
  document.getElementById("purchase-modal").style.display = "none";
}

function confirmPurchase() {
  const email = document.getElementById("purchase-email").value.trim();
  if (!email) {
    alert("Please enter your email.");
    return;
  }

  const formURL =
    "https://docs.google.com/forms/d/1D5BV44ocn7nVOxrMXBOEOAELT8s2BcGoi6K3LqjGRb0/formResponse";
  const entryID = "entry.70548093";

  const data = new FormData();
  data.append(entryID, email);

  fetch(formURL, { method: "POST", body: data, mode: "no-cors" })
  .then(() => alert("Check your inbox. Yuri just slid into your mail."))
  .catch(() => alert("Connection error."));
}
</script>

</body>
</html>


    <div class="item-desc mint">
      <h3 class="item-title">
        Loverbite Crystal
        <span class="item-price">– 270 credits</span>
      </h3>
      <p class="item-effect">Effect: Shared desire between two users.</p>
      <p class="item-text">Heart candy eaten often while kissing.</p>

      <button class="buy-btn" onclick="openPurchase('Loverbite Crystal')">
        Buy
      </button>
    </div>
  </div>


  <!-- ITEM 4 --------------------------------------->
  <div class="item-card sold">
    <div class="item-img">
      <img src="powder 4.png" style="width:100%; height:100%; object-fit:cover;">
    </div>
    <div class="item-desc">
      <h3 class="item-title">
        DreamPatch Nimbus
        <span class="item-price">– 180 credits</span>
      </h3>
      <p class="item-effect">Effect: Quick euphoria, soft visuals.</p>
      <p class="item-text">Pink powder you inhale; gives a light floating feeling.</p>
      <span class="tag-ribbon">SOLD OUT</span>
    </div>
  </div>


</div>
</main>


  <aside class="sidebar right">
    <img src="pinkmantis1.jpg">
    <img src="Spider1.jpg">
    <img src="bettle1.jpg">
    <img src="poster4.jpg">
  </aside>
</div>



<!-- PURCHASE MODAL ------------------------------------------------->
<div id="purchase-modal" class="purchase-modal">
  <div class="purchase-box">
    <p class="purchase-title">Confirm purchase</p>
    <p class="purchase-text">
      Do you really want to buy <span id="product-name"></span>?<br>
      <span>We are not responsible for any issues<br>that occur during use.</span>
    </p>
    <input type="email" id="purchase-email" class="purchase-input" placeholder="Enter your email">
    <div class="purchase-actions">
      <button onclick="confirmPurchase()">Confirm</button>
      <button onclick="closePurchase()">Cancel</button>
    </div>
  </div>
</div>


<button id="to-top-btn" onclick='window.location.href="index.html";'>
  Back to main
</button>



<!-- ============================================================= -->
<!-- =====================  JAVASCRIPT  ========================== -->
<!-- ============================================================= -->

<script>
/* sidebar 이미지 섞기 ---------------------------------------------------*/
function shuffleSidebarImages(sidebarClass) {
  const sidebars = document.getElementsByClassName(sidebarClass);
  Array.from(sidebars).forEach(sidebar => {
    const imgs = Array.from(sidebar.querySelectorAll('img'));

    for (let i = imgs.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [imgs[i], imgs[j]] = [imgs[j], imgs[i]];
    }

    sidebar.innerHTML = '';
    imgs.forEach(img => sidebar.appendChild(img));
  });
}

document.addEventListener('DOMContentLoaded', function () {
  shuffleSidebarImages('sidebar');
  setInterval(() => shuffleSidebarImages('sidebar'), 1500);
});


/* PURCHASE MODAL -------------------------------------------------------*/
let currentProduct = "";

function openPurchase(name) {
  currentProduct = name;
  document.getElementById("product-name").textContent = name;
  document.getElementById("purchase-email").value = "";
  document.getElementById("purchase-modal").style.display = "flex";
}

function closePurchase() {
  document.getElementById("purchase-modal").style.display = "none";
}


/* ============================================================= */
/* =========   메일 전송 (첫 페이지 방식 그대로 복원)  ========= */
/* ============================================================= */

function confirmPurchase() {
  const email = document.getElementById("purchase-email").value.trim();
  if (!email) {
    alert("Please enter your email to continue.");
    return;
  }

  /* ✅ 첫 페이지에서 메일 성공했던 구글폼 URL (같은 시트/트리거로 보내야 함) */
  const formURL =
    "https://docs.google.com/forms/d/1D5BV44ocn7nVOxrMXBOEOAELT8s2BcGoi6K3LqjGRb0/formResponse";

  /* ✅ 첫 페이지에서 쓰던 entry 번호 그대로 */
  const entryID = "entry.70548093";

  const data = new FormData();
  data.append(entryID, email);

  fetch(formURL, {
    method: "POST",
    body: data,
    mode: "no-cors"
  })
  .then(() => {
    alert("Check your inbox. Yuri just slid into your mail.");
    closePurchase();
  })
  .catch(() => {
    alert("Connection error. Try again.");
  });
}

</script>

</body>
</html>
